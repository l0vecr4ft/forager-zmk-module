# ============================================
# FORAGER KEYBOARD - CONFIGURAZIONE GENERALE
# ============================================
# Questo file viene usato da tutte le varianti:
# - forager_left (con rgbled_adapter)
# - forager_right (con rgbled_adapter)
# - forager_dongle (con prospector_adapter)

# ============================================
# PROSPECTOR DISPLAY - Configurazione
# ============================================

# Sensore luce ambientale (disabilitato, usa brightness fisso)
CONFIG_PROSPECTOR_USE_AMBIENT_LIGHT_SENSOR=n

# Luminosità fissa del display (0-100)
CONFIG_PROSPECTOR_FIXED_BRIGHTNESS=80

# Mostra i modificatori attivi (Shift, Ctrl, Alt, GUI)
CONFIG_PROSPECTOR_SHOW_MODIFIERS=y

# Mostra anche i modificatori inattivi (grigi)
CONFIG_PROSPECTOR_SHOW_INACTIVE_MODIFIERS=y

# Ordine di visualizzazione modificatori: GUI, Alt, Ctrl, Shift
CONFIG_PROSPECTOR_MODIFIER_ORDER="GACS"

# ============================================
# PROSPECTOR - Status Screen
# ============================================

CONFIG_PROSPECTOR_STATUS_SCREEN_RADII=n
CONFIG_PROSPECTOR_STATUS_SCREEN_FIELD=y
CONFIG_PROSPECTOR_STATUS_SCREEN_OPERATOR=n

# ============================================
# PROSPECTOR - Animazioni
# ============================================

# WPM di riferimento per le animazioni
CONFIG_PROSPECTOR_ANIMATION_WPM_REFERENCE=70

# Tempo di decadimento dell'intensità (secondi)
CONFIG_PROSPECTOR_ANIMATION_INTENSITY_DECAY_SEC=30

# Tempo di decadimento del flow (secondi)
CONFIG_PROSPECTOR_ANIMATION_FLOW_DECAY_SEC=300

# ============================================
# BLUETOOTH - Split Keyboard
# ============================================

# Abilita connessioni BLE sperimentali
# Necessario per il dongle centrale che riceve da left+right
CONFIG_ZMK_BLE_EXPERIMENTAL_CONN=y

# ============================================
# SOFT OFF - Spegnimento Software
# ============================================

# Abilita funzionalità soft-off (spegnimento software)
# Permette di spegnere la tastiera via keymap (layer SYST)
# Riattivazione: premere il pulsante reset o ricollegare USB
CONFIG_ZMK_PM_SOFT_OFF=y

# ============================================
# RISPARMIO ENERGETICO - Batteria Split
# ============================================

# --- SLEEP MODE ---
# Abilita la modalità sleep quando inattiva
CONFIG_ZMK_SLEEP=y

# Timeout prima di andare in deep sleep (millisecondi)
# 900000ms = 15 minuti
# 1800000ms = 30 minuti
# 3600000ms = 60 minuti
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=900000

# --- IDLE TIMEOUT ---
# Timeout di inattività prima di ridurre consumi (millisecondi)
# 30000ms = 30 secondi
# 60000ms = 1 minuto
CONFIG_ZMK_IDLE_TIMEOUT=30000

# --- DEBOUNCE OTTIMIZZATO ---
# Riduce il tempo di debounce per minore latenza e consumo
# Valori standard: 5ms
CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=5
CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=5

# --- RGB UNDERGLOW ---
# Spegni RGB quando in idle (se rgbled_adapter è presente)
#CONFIG_ZMK_RGB_UNDERGLOW_AUTO_OFF_IDLE=y

# Spegni RGB quando connesso via USB (risparmio batteria)
#CONFIG_ZMK_RGB_UNDERGLOW_AUTO_OFF_USB=n

# Timeout per spegnimento RGB in idle (millisecondi)
# 30000ms = 30 secondi
#CONFIG_ZMK_RGB_UNDERGLOW_IDLE_TIMEOUT=30000

# Luminosità predefinita RGB (0-100)
# Ridurre per risparmiare batteria
#CONFIG_ZMK_RGB_UNDERGLOW_BRT_START=20

# --- BLE POWER MANAGEMENT ---
# Disabilita funzioni BLE non essenziali per risparmiare
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=n

# Disabilita passkey entry (risparmio energetico)
CONFIG_ZMK_BLE_PASSKEY_ENTRY=n

# --- LOGGING ---
# Disabilita logging per risparmiare risorse
# (già commentato nella sezione DEBUG)

# ============================================
# OPZIONI AVANZATE RISPARMIO ENERGETICO
# ============================================
# Decommenta solo se hai problemi di durata batteria

# Riduce la potenza di trasmissione BLE (più risparmio, meno portata)
# CONFIG_BT_CTLR_TX_PWR_MINUS_20=y

# Aumenta intervallo di connessione BLE (più risparmio, più latenza)
# CONFIG_BT_PERIPHERAL_PREF_MIN_INT=12
# CONFIG_BT_PERIPHERAL_PREF_MAX_INT=24

# Disabilita display work queue dedicata (risparmio risorse)
# CONFIG_ZMK_DISPLAY_WORK_QUEUE_DEDICATED=n

# ============================================
# DEBUG (opzionale)
# ============================================

# Abilita logging USB (utile per troubleshooting)
# ATTENZIONE: Aumenta il consumo energetico!
# Decommentare solo quando necessario
# CONFIG_ZMK_USB_LOGGING=y
# CONFIG_LOG=y
